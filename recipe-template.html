<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>RECIPE_TITLE | rcpbx</title>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-E2VNWY2BFX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-E2VNWY2BFX');
  </script>
  <link rel="stylesheet" href="../../css/style.css">
  <style>
    /* Recipe page styles */
    body{padding-bottom:env(safe-area-inset-bottom,0)}
    .recipe-card{max-width:800px;margin:0 auto}
    .recipe-header{padding:1rem;border-bottom:1px solid var(--border)}
    .recipe-title{font-size:1.35rem;font-weight:700;letter-spacing:-0.02em;margin-bottom:0.5rem;line-height:1.2}
    .recipe-meta{display:flex;gap:1rem;font-family:var(--font-mono);font-size:0.8rem;flex-wrap:wrap}
    .recipe-meta .item{display:flex;gap:0.3rem}
    .recipe-meta .label{color:var(--text-muted)}
    .recipe-meta .value{font-weight:500}
    .recipe-body{display:flex;flex-direction:column}
    .ingredients{padding:1rem;background:var(--bg-alt);border-bottom:1px solid var(--border)}
    .ingredients h2,.steps h2{font-size:0.7rem;text-transform:uppercase;letter-spacing:0.08em;color:var(--text-muted);margin-bottom:0.75rem;font-weight:600}
    .ingredients-list{list-style:none;padding:0;margin:0}
    .ingredients-list li{font-family:var(--font-mono);font-size:0.95rem;padding:0.75rem 0.5rem;margin:0 -0.5rem;border-bottom:1px solid var(--border);border-radius:6px;cursor:pointer;-webkit-tap-highlight-color:transparent;transition:all 0.15s;min-height:48px;display:flex;align-items:center}
    .ingredients-list li:last-child{border-bottom:none}
    .ingredients-list li:active{background:var(--accent-dim)}
    .ingredients-list li.checked{color:var(--text-dim);text-decoration:line-through;background:var(--bg);opacity:0.6}
    .ingredients-list .amount{color:var(--accent);font-weight:500;min-width:4rem;display:inline-block}
    .steps{padding:1rem;padding-bottom:100px}
    .steps-list{list-style:none;padding:0;margin:0;counter-reset:step}
    .steps-list li{position:relative;padding:1rem 0 1rem 3rem;border-bottom:1px solid var(--border);font-size:1rem;line-height:1.6;cursor:pointer;-webkit-tap-highlight-color:transparent;transition:all 0.15s;min-height:60px}
    .steps-list li:last-child{border-bottom:none}
    .steps-list li::before{counter-increment:step;content:counter(step);position:absolute;left:0;top:1rem;width:2rem;height:2rem;background:var(--bg-alt);border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:var(--font-mono);font-size:0.8rem;font-weight:500;color:var(--text-muted)}
    .steps-list li:active{background:var(--accent-dim);margin:0 -1rem;padding-left:4rem;padding-right:1rem}
    .steps-list li.active{background:var(--accent-dim);margin:0 -1rem;padding-left:4rem;padding-right:1rem}
    .steps-list li.active::before{background:var(--accent);color:#fff}
    .steps-list li.dimmed{opacity:0.35}
    .recipe-controls{position:fixed;bottom:0;left:0;right:0;background:var(--bg);border-top:1px solid var(--border);padding:0.75rem 1rem;padding-bottom:calc(0.75rem + env(safe-area-inset-bottom,0));display:flex;align-items:center;justify-content:space-between;gap:0.5rem;z-index:100;font-family:var(--font-mono);font-size:0.8rem}
    .scale-controls{display:flex;align-items:center;gap:0.3rem}
    .scale-controls span{color:var(--text-muted);margin-right:0.2rem;font-size:0.7rem}
    .scale-btn{padding:0.4rem 0.6rem;border:1px solid var(--border);background:var(--bg-alt);color:var(--text);cursor:pointer;border-radius:4px;font-family:var(--font-mono);font-size:0.75rem;min-width:40px;min-height:44px;-webkit-tap-highlight-color:transparent}
    .scale-btn.active{background:var(--text);color:var(--bg);border-color:var(--text)}
    .wake-lock{display:flex;align-items:center;gap:0.3rem;color:var(--text-muted);cursor:pointer;padding:0.4rem 0.6rem;border:1px solid var(--border);border-radius:4px;background:var(--bg-alt);min-height:44px;font-size:0.7rem;-webkit-tap-highlight-color:transparent}
    .wake-lock input{accent-color:var(--accent);width:16px;height:16px}
    .wake-lock.active{background:var(--accent-dim);border-color:var(--accent);color:var(--accent)}
    .print-btn{padding:0.4rem 0.6rem;border:1px solid var(--border);background:var(--bg-alt);color:var(--text-muted);cursor:pointer;border-radius:4px;font-family:var(--font-mono);font-size:0.7rem;min-height:44px;display:flex;align-items:center;gap:0.25rem;-webkit-tap-highlight-color:transparent}
    .print-btn:active{border-color:var(--accent);color:var(--accent)}
    .breadcrumb{font-family:var(--font-mono);font-size:0.75rem;color:var(--text-muted);padding:0.75rem 1rem;max-width:800px;margin:0 auto}
    .breadcrumb a{color:var(--text-muted)}
    .breadcrumb span{margin:0 0.3rem;color:var(--text-dim)}
    
    @media(min-width:600px){
      .recipe-header{padding:1.5rem}
      .recipe-title{font-size:1.5rem}
      .ingredients,.steps{padding:1.5rem}
      .steps{padding-bottom:120px}
    }
    @media(min-width:768px){
      .recipe-body{display:grid;grid-template-columns:280px 1fr}
      .ingredients{border-bottom:none;border-right:1px solid var(--border);position:sticky;top:var(--header-height);max-height:calc(100vh - var(--header-height));overflow-y:auto}
      .steps{padding-bottom:2rem}
      .recipe-controls{position:static;border-top:none;border-bottom:1px solid var(--border);padding:0.75rem 1.5rem;justify-content:flex-start}
      .print-btn{margin-left:auto}
    }
    
    /* ============================================
       3x5 INDEX CARD PRINT
       ============================================ */
    @media print {
      @page {
        size: 5in 3in;
        margin: 0.12in;
      }
      
      * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
      }
      
      html, body {
        width: 5in;
        height: 3in;
        margin: 0;
        padding: 0;
        font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
        font-size: 7pt;
        line-height: 1.2;
        background: white !important;
        color: #000 !important;
      }
      
      .site-header,
      .site-footer,
      .recipe-controls,
      .breadcrumb {
        display: none !important;
      }
      
      .recipe-card {
        max-width: none;
        width: 100%;
        margin: 0;
        padding: 0;
      }
      
      .recipe-header {
        padding: 0 0 0.06in 0;
        margin-bottom: 0.06in;
        border-bottom: 0.5pt solid #666;
      }
      
      .recipe-title {
        font-size: 10pt;
        font-weight: 700;
        margin: 0 0 0.02in 0;
        line-height: 1.1;
      }
      
      .recipe-meta {
        font-size: 6pt;
        gap: 0.12in;
        color: #444;
      }
      
      .recipe-body {
        display: grid;
        grid-template-columns: 1.3in 1fr;
        gap: 0.08in;
        height: calc(3in - 0.5in);
      }
      
      .ingredients {
        padding: 0;
        padding-right: 0.06in;
        background: transparent !important;
        border-right: 0.5pt solid #ccc;
        border-bottom: none;
        position: static;
        max-height: none;
        overflow: visible;
      }
      
      .ingredients h2,
      .steps h2 {
        font-size: 6pt;
        text-transform: uppercase;
        letter-spacing: 0.02em;
        color: #666;
        margin: 0 0 0.03in 0;
        padding-bottom: 0.02in;
        border-bottom: 0.25pt solid #ddd;
      }
      
      .ingredients-list {
        margin: 0;
        padding: 0;
      }
      
      .ingredients-list li {
        font-size: 6pt;
        padding: 0.015in 0;
        margin: 0;
        border: none;
        min-height: 0;
        line-height: 1.2;
        background: transparent !important;
        text-decoration: none !important;
        opacity: 1 !important;
        color: #000 !important;
        display: block;
      }
      
      .ingredients-list .amount {
        font-weight: 600;
        color: #000;
        min-width: 0.35in;
        display: inline-block;
      }
      
      .steps {
        padding: 0;
        padding-left: 0.06in;
        overflow: visible;
      }
      
      .steps-list {
        margin: 0;
        padding: 0;
      }
      
      .steps-list li {
        font-size: 6pt;
        padding: 0.015in 0 0.015in 0.16in;
        margin: 0;
        border: none;
        min-height: 0;
        line-height: 1.2;
        background: transparent !important;
        opacity: 1 !important;
        page-break-inside: avoid;
      }
      
      .steps-list li::before {
        width: 0.11in;
        height: 0.11in;
        font-size: 5pt;
        top: 0.015in;
        left: 0;
        background: #e0e0e0 !important;
        color: #333 !important;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      /* Cute corner icon */
      .recipe-card::after {
        content: '‚ô®';
        position: fixed;
        bottom: 0.06in;
        right: 0.06in;
        font-size: 7pt;
        color: #bbb;
      }
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container">
      <a href="../../" class="logo">rcpbx</a>
      <a href="../../reference/" class="header-link">Reference</a>
    </div>
  </header>

  <nav class="breadcrumb">
    <a href="../../">rcpbx</a><span>/</span><a href="../">Category</a><span>/</span>Recipe Name
  </nav>

  <main class="recipe-card">
    <div class="recipe-controls">
      <div class="scale-controls">
        <span>Scale:</span>
        <button class="scale-btn" data-scale="0.5">¬Ω√ó</button>
        <button class="scale-btn active" data-scale="1">1√ó</button>
        <button class="scale-btn" data-scale="2">2√ó</button>
      </div>
      <label class="wake-lock" id="wake-label">
        <input type="checkbox" id="wake-lock">
        <span>Screen on</span>
      </label>
      <button class="print-btn" onclick="window.print()">
        <span>üóÉÔ∏è</span> 3√ó5 Card
      </button>
    </div>

    <header class="recipe-header">
      <h1 class="recipe-title">Buttermilk Pancakes</h1>
      <div class="recipe-meta">
        <div class="item"><span class="label">Prep</span><span class="value">10 min</span></div>
        <div class="item"><span class="label">Cook</span><span class="value">15 min</span></div>
        <div class="item"><span class="label">Serves</span><span class="value">4</span></div>
      </div>
    </header>

    <div class="recipe-body">
      <section class="ingredients">
        <h2>Ingredients</h2>
        <ul class="ingredients-list" id="ingredients">
          <li><span class="amount">2 cups</span> all-purpose flour</li>
          <li><span class="amount">2 tbsp</span> sugar</li>
          <li><span class="amount">1 tsp</span> baking powder</li>
          <li><span class="amount">1 tsp</span> baking soda</li>
          <li><span class="amount">¬Ω tsp</span> salt</li>
          <li><span class="amount">2 cups</span> buttermilk</li>
          <li><span class="amount">2</span> eggs</li>
          <li><span class="amount">4 tbsp</span> melted butter</li>
          <li><span class="amount">1 tsp</span> vanilla</li>
        </ul>
      </section>

      <section class="steps">
        <h2>Steps</h2>
        <ol class="steps-list" id="steps">
          <li>Whisk flour, sugar, baking powder, baking soda, and salt in a large bowl.</li>
          <li>In another bowl, whisk buttermilk, eggs, melted butter, and vanilla.</li>
          <li>Pour wet into dry. Stir until just combined ‚Äî lumps are fine. Don't overmix.</li>
          <li>Heat griddle over medium. Brush with butter.</li>
          <li>Pour ¬º cup per pancake. Cook until bubbles form, 2-3 min.</li>
          <li>Flip, cook 1-2 min until golden.</li>
          <li>Serve with butter and maple syrup.</li>
        </ol>
      </section>
    </div>
  </main>

  <footer class="site-footer"><p>rcpbx ‚Äî recipes, no bullshit</p></footer>

  <script>
    // Ingredient checking
    document.getElementById('ingredients').addEventListener('click', e => {
      const li = e.target.closest('li');
      if (li) li.classList.toggle('checked');
    });

    // Step highlighting
    const steps = document.getElementById('steps');
    steps.addEventListener('click', e => {
      const li = e.target.closest('li');
      if (!li) return;
      const all = steps.querySelectorAll('li');
      const isActive = li.classList.contains('active');
      all.forEach(s => s.classList.remove('active', 'dimmed'));
      if (!isActive) {
        li.classList.add('active');
        all.forEach(s => { if (s !== li) s.classList.add('dimmed'); });
      }
    });

    // Scale buttons
    document.querySelectorAll('.scale-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.scale-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
      });
    });

    // Wake lock
    const wakeLock = document.getElementById('wake-lock');
    const wakeLabel = document.getElementById('wake-label');
    let lock = null;
    
    if ('wakeLock' in navigator) {
      wakeLock.addEventListener('change', async function() {
        if (this.checked) {
          try {
            lock = await navigator.wakeLock.request('screen');
            wakeLabel.classList.add('active');
          } catch (e) {
            this.checked = false;
          }
        } else {
          if (lock) lock.release();
          lock = null;
          wakeLabel.classList.remove('active');
        }
      });
    }
  </script>
  <script src="../../js/easter-eggs.js"></script>
</body>
</html>
